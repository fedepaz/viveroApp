// prisma/schema/auditLog.prisma

model AuditLog {
  id         String   @id @default(cuid())
  tenantId   String
  tenant     Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  action     String
  entityType String
  entityId   String
  changes    Json
  timestamp  DateTime @default(now())
  ipAddress  String?
  userAgent  String?

  @@index([tenantId, timestamp])
  @@index([userId])
  @@index([entityType, entityId])
  @@map("audit_logs")
}
