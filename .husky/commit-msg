#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Ejecutar commitlint y capturar el c√≥digo de salida
npx --no -- commitlint --edit "$1"
EXIT_CODE=$?

# Si commitlint falla (c√≥digo de salida no es 0), mostrar un mensaje de ayuda en espa√±ol
if [ "$EXIT_CODE" != 0 ]; then
  echo "------------------------------------------------------------------"
  echo "‚ùå Error: Tu mensaje de commit no sigue el formato de Conventional Commits."
  echo ""
  echo "üëâ Por favor, formatea tu mensaje de la siguiente manera:"
  echo "   <tipo>(√°mbito opcional): <descripci√≥n>"
  echo ""
  echo "   Ejemplos:"
  echo "     feat: agregar bot√≥n de login"
  echo "     fix(api): corregir error en el endpoint de usuarios"
  echo ""
  echo "üí° Para una gu√≠a detallada, consulta el archivo COMMIT_CONVENTIONS.md"
  exit 1
fi

exit 0
